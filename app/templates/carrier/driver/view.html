{% extends "layout.html" %}

{% block content %}
	<div class="container-fluid" id="container">
		<div class="row-fluid">
			<div class="box">
				<div class="box-title">
					Actions: &nbsp;&nbsp;<a href="{{ url_for('carrier.edit_driver', driver_id=driver.id) }}" class="btn btn-primary">Edit</a>
				</div>
			</div>
		</div>
		<div class="row-fluid">
		    <div class="span12">
        		<div class="box">
            		<div class="box-title">
	                	Driver
                	</div>
            		<div class="box-content nopadding">
	                	<div class="form-horizontal">
	                    	<div class="control-group">
	                        	<label class="control-label">Name</label>
	                        	<div class="controls">
	                           		<p>{{ driver.get_full_name() }}</p>
	                        	</div>
	                    	</div>
	                    	<div class="control-group">
	                        	<label class="control-label">Phone</label>
	                        	<div class="controls">
	                           		<p>{{ driver.get_phone_number() }}</p>
	                        	</div>
	                    	</div>
	                	</div> 
                	</div>
            	</div>
			</div>
		</div>
		<div class="row-fluid">
    		<div class="span12">
        		<div class="box">
	                <div class="box-title">
	                    Loads
	                </div>
	                <div class="box-content nopadding">
	                    {% if driver.loads|length > 0 %}
		                    <table class="table table-striped table-bordered">
		                        <thead>
		                            <tr>
		                                <th>Load ID</th>
		                                <th>Origin</th>
		                                <th>Destination</th>
		                                <th>Status</th>
		                                <th>&nbsp</th>
		                            </tr>
		                        </thead>
		                        <tbody>
		                            {% for load in driver.loads %}
		                                <tr>
		                                    <td><a href="{{ url_for('load.view', load_id=load.id) }}">{{ load.id }}</a></td>
		                                    <td>{{ load.lane.origin }}</td>
		                                    <td>{{ load.lane.destination }}</td>
		                                    <td>{{ load.status }}</td>
		                                    <td>
		                                        {% if load.status == "Assigned" %}
		                                            <a href="{{ url_for('load.complete', load_id=load.id)}}" class="btn btn-primary btn-mini ">Complete</a>
		                                        {% elif load.status != "Complete" %}
		                                            <a href="{{ url_for('load.edit', load_id=load.id)}}" class="btn btn-primary btn-mini">Edit</a>
		                                        
		                                            <a href="{{ url_for('load.delete', load_id=load.id)}}" class="btn btn-danger btn-mini delete">Delete</a>
		                                        {% endif %}
		                                    </td>
		                                </tr>
		                            {% endfor %}
		                        </tbody>
		                    </table>
		                {% else %}
		                <div class="form-horizontal">
		                	<div class="control-group">
		               			<div class="controls">
	                           		<p>No previous activity</p>
	                        	</div>
	                    	</div>
	                	</div>
		                	
		                {% endif %}
	                </div>
        		</div>
    		</div>
		</div>
	</div>
{% endblock %}